# Clang-tidy configuration for docker-cpp project
# Focus on important code quality issues and avoid excessive warnings
---
Checks: >
  bugprone-*,
  performance-*,
  modernize-*,
  readability-identifier-naming,
  readability-isolate-declaration,
  readability-simplify-boolean-expr,
  misc-uniqueptr-reset-release,
  misc-use-anonymous-namespace,
  cert-dcl03-cpp,
  cert-dcl21-cpp,
  cert-dcl54-cpp,
  cert-dcl58-cpp,
  cert-dcl60-cpp,
  cert-err34-c,
  cert-err52-cpp,
  cert-err60-cpp,
  cert-fio38-c,
  cert-flp30-c,
  cert-mem57-cpp,
  cert-msc50-cpp,
  cert-oop57-cpp,
  cert-oop58-cpp,
  cert-pos44-c,
  cert-pos51-cpp,
  cert-pos54-c,
  cert-sig30-c,
  cert-str34-c,
  cppcoreguidelines-pro-type-const-cast,
  cppcoreguidelines-pro-type-reinterpret-cast,
  cppcoreguidelines-pro-type-vararg,
  cppcoreguidelines-slicing,

  # Disable overly noisy or less relevant checks
  -misc-no-recursion,
  -cppcoreguidelines-avoid-non-const-global-variables,
  -cppcoreguidelines-owning-memory,
  -cppcoreguidelines-pro-bounds-pointer-arithmetic,
  -cppcoreguidelines-pro-bounds-array-to-pointer-decay,
  -cppcoreguidelines-special-member-functions,
  -modernize-use-trailing-return-type,
  -readability-function-cognitive-complexity,
  -readability-magic-numbers,
  -readability-redundant-access-specifiers,
  -readability-convert-member-functions-to-static,
  -cert-dcl50-cpp,   # Too strict for current codebase
  -cert-err58-cpp,   # Too strict for current codebase

WarningsAsErrors: >
  bugprone-use-after-move,
  bugprone-dangling-handle,
  bugprone-misplaced-widening-cast,
  bugprone-sizeof-expression,
  performance-move-const-arg,
  performance-unnecessary-copy-initialization,
  modernize-use-nullptr,
  modernize-use-override

HeaderFilterRegex: '^(src|include)/.*'
FormatStyle: file

CheckOptions:
  # Key for naming checks
  - key: readability-identifier-naming.ClassCase
    value: CamelCase
  - key: readability-identifier-naming.FunctionCase
    value: camelBack
  - key: readability-identifier-naming.VariableCase
    value: camelBack
  - key: readability-identifier-naming.PrivateMemberSuffix
    value: '_'
  - key: readability-identifier-naming.MemberCase
    value: lower_case
  - key: readability-identifier-naming.ConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.EnumConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.EnumCase
    value: CamelCase
  - key: readability-identifier-naming.MacroCase
    value: UPPER_CASE

  # Performance checks
  - key: performance-unnecessary-copy-initialization.CheckTriviallyCopyableMove
    value: false

  # Modernize checks
  - key: modernize-loop-convert.MinConfidence
    value: reasonable
  - key: modernize-use-override.IgnoreMacroDeclarations
    value: true